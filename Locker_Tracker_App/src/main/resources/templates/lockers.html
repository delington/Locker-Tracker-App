<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymleaf.org">

<head>
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
</head>
<body>
	<h1>Lockers</h1>
	<a href="/users">Users</a>
	<form id="formLogout" th:action="@{/logout}" method="POST">
        <a id="logoutAnchor" href="javascript:{}" onclick="document.getElementById('formLogout').submit()">Logout</a>
    </form>
	<br></br>
	<br></br>
	<div>
		<table>
			<tr>
				<th>Locker ID</th>
				<th>Owner Email</th>
				<th>Action</th>
			</tr>
			<tr th:each="locker : ${lockers}">
				<td class="idColumn" th:text="${locker.id}">Locker identifier</td>
				<td th:text=" ${locker.owner != null} ? ${locker.owner.email} : 'Free'">Email</td>
				<td class="editable" th:if="${locker.owner == null}">
				    <form action="#" th:action="@{/edit}" method="POST">
						<button style="height: 50px; width: 70px" type="submit" name="lockerId" th:value="${locker.id}">Reserve</button>
					</form>
				</td>
				<td th:class="${locker.owner != null and userEmail == locker.owner.email} ? 'removable' : ''" th:if="${locker.owner != null}">
				    <form th:if="${userEmail == locker.owner.email}" action="#" th:action="@{/remove}" th:method="DELETE">
                        <button style="height: 50px; width: 70px" type="submit">Remove</button>
                    </form>
				</td>
			</tr>
		</table>
	</div>
</body>
</html>